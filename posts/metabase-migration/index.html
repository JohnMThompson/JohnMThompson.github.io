<!doctype html>
<html
  dir="ltr"
  lang="en"
  data-theme=""
  
    class="html theme--light"
  
><head>
  <meta charset="utf-8" />
  <title>
    John Thompson
        |
        What I Learned Migrating Metabase to Postgres
      

    

  </title>

  <meta name="generator" content="Hugo 0.149.0"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="author" content="John Thompson" />
  <meta
    name="description"
    content="Exploring analytics, product, and data"
  />
  
  
    
    
    <link
      rel="stylesheet"
      href="/scss/main.min.393ce6c2b8c7b6b09974d47c4e3c683ba01f267738bdf756563dc31999c2674f.css"
      integrity="sha256-OTzmwrjHtrCZdNR8TjxoO6AfJnc4vfdWVj3DGZnCZ08="
      crossorigin="anonymous"
      type="text/css"
    />
  

  
  <link
    rel="stylesheet"
    href="/css/markupHighlight.min.73ccfdf28df555e11009c13c20ced067af3cb021504cba43644c705930428b00.css"
    integrity="sha256-c8z98o31VeEQCcE8IM7QZ688sCFQTLpDZExwWTBCiwA="
    crossorigin="anonymous"
    type="text/css"
  />
  
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/fontawesome.min.137b1cf3cea9a8adb7884343a9a5ddddf4280f59153f74dc782fb7f7bf0d0519.css"
    integrity="sha256-E3sc886pqK23iENDqaXd3fQoD1kVP3TceC&#43;3978NBRk="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/solid.min.e65dc5b48fb5f39b142360c57c3a215744c94e56c755c929cc3e88fe12aab4d3.css"
    integrity="sha256-5l3FtI&#43;185sUI2DFfDohV0TJTlbHVckpzD6I/hKqtNM="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/regular.min.6f4f16d58da1c82c0c3a3436e021a3d39b4742f741192c546e73e947eacfd92f.css"
    integrity="sha256-b08W1Y2hyCwMOjQ24CGj05tHQvdBGSxUbnPpR&#43;rP2S8="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/brands.min.e10425ad768bc98ff1fb272a0ac8420f9d1ba22f0612c08ff1010c95080ffe7e.css"
    integrity="sha256-4QQlrXaLyY/x&#43;ycqCshCD50boi8GEsCP8QEMlQgP/n4="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link rel="shortcut icon" href="/favicons/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" sizes="180x180" href="/favicons/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png" />

  <link rel="canonical" href="https://johnmthompson.github.io/posts/metabase-migration/" />

  
  
  
  
  <script
    type="text/javascript"
    src="/js/anatole-header.min.f9132794301a01ff16550ed66763482bd848f62243d278f5e550229a158bfd32.js"
    integrity="sha256-&#43;RMnlDAaAf8WVQ7WZ2NIK9hI9iJD0nj15VAimhWL/TI="
    crossorigin="anonymous"
  ></script>

  
    
    
    <script
      type="text/javascript"
      src="/js/anatole-theme-switcher.min.d6d329d93844b162e8bed1e915619625ca91687952177552b9b3e211014a2957.js"
      integrity="sha256-1tMp2ThEsWLovtHpFWGWJcqRaHlSF3VSubPiEQFKKVc="
      crossorigin="anonymous"
    ></script>
  

  

  


  
  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="What I Learned Migrating Metabase to Postgres">
  <meta name="twitter:description" content="Since 2022, I’ve maintained a deployment of Metabase for hobby projects. It’s been a key part of learning new skills and showcasing projects.
Over the last 3 years, my Metabase deployment has stayed simple - utilizing the default H2 database that ships with the product. Even though the documentation recommends moving off H2 for stability, I stuck with it while I learned the tool. If felt like the right time to move to the recommended database before my portfolio was at risk.">



  
  <meta property="og:url" content="https://johnmthompson.github.io/posts/metabase-migration/">
  <meta property="og:site_name" content="John Thompson">
  <meta property="og:title" content="What I Learned Migrating Metabase to Postgres">
  <meta property="og:description" content="Since 2022, I’ve maintained a deployment of Metabase for hobby projects. It’s been a key part of learning new skills and showcasing projects.
Over the last 3 years, my Metabase deployment has stayed simple - utilizing the default H2 database that ships with the product. Even though the documentation recommends moving off H2 for stability, I stuck with it while I learned the tool. If felt like the right time to move to the recommended database before my portfolio was at risk.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-08-30T09:00:00-05:00">
    <meta property="article:modified_time" content="2025-08-30T09:00:00-05:00">
    <meta property="article:tag" content="Metabase">
    <meta property="article:tag" content="PostgreSQL">
    <meta property="article:tag" content="Linux">



  
  
  
  
  <script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "articleSection": "posts",
        "name": "What I Learned Migrating Metabase to Postgres",
        "headline": "What I Learned Migrating Metabase to Postgres",
        "alternativeHeadline": "",
        "description": "
      
        \u003cp\u003eSince 2022, I\u0026rsquo;ve maintained a deployment of Metabase for hobby projects. It\u0026rsquo;s been a key part of learning new skills and showcasing projects.\u003c\/p\u003e\n\u003cp\u003eOver the last 3 years, my Metabase deployment has stayed simple - utilizing the default H2 database that ships with the product. Even though the documentation recommends moving off H2 for stability, I stuck with it while I learned the tool. If felt like the right time to move to the recommended database before my portfolio was at risk.\u003c\/p\u003e


      


    ",
        "inLanguage": "en-us",
        "isFamilyFriendly": "true",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/johnmthompson.github.io\/posts\/metabase-migration\/"
        },
        "author" : {
            "@type": "Person",
            "name": "John Thompson"
        },
        "creator" : {
            "@type": "Person",
            "name": "John Thompson"
        },
        "accountablePerson" : {
            "@type": "Person",
            "name": "John Thompson"
        },
        "copyrightHolder" : {
            "@type": "Person",
            "name": "John Thompson"
        },
        "copyrightYear" : "2025",
        "dateCreated": "2025-08-30T09:00:00.00Z",
        "datePublished": "2025-08-30T09:00:00.00Z",
        "dateModified": "2025-08-30T09:00:00.00Z",
        "publisher":{
            "@type":"Organization",
            "name": "John Thompson",
            "url": "https://johnmthompson.github.io/",
            "logo": {
                "@type": "ImageObject",
                "url": "https:\/\/johnmthompson.github.io\/favicons\/favicon-32x32.png",
                "width":"32",
                "height":"32"
            }
        },
        "image": 
      [
      ]

    ,
        "url" : "https:\/\/johnmthompson.github.io\/posts\/metabase-migration\/",
        "wordCount" : "680",
        "genre" : [ ],
        "keywords" : [ 
      
      "Metabase"

    
      
        ,

      
      "PostgreSQL"

    
      
        ,

      
      "linux"

    ]
    }
  </script>


</head>
<body class="body">
    <div class="wrapper">
      <aside
        
          class="wrapper__sidebar"
        
      ><div
  class="sidebar
    animated fadeInDown
  "
>
  <div class="sidebar__content">
    <div class="sidebar__introduction">
      <img
        class="sidebar__introduction-profileimage"
        src="/images/jt.jpeg"
        alt="profile picture"
      />
      
        <div class="sidebar__introduction-title">
          <a href="/">John Thompson</a>
        </div>
      
      <div class="sidebar__introduction-description">
        <p>Exploring analytics, product, and data</p>
      </div>
    </div>
    <ul class="sidebar__list">
      
        <li class="sidebar__list-item">
          <a
            href="https://www.linkedin.com/in/johnmthomp/"
            target="_blank"
            rel="noopener me"
            aria-label="Linkedin"
            title="Linkedin"
          >
            <i class="fab fa-linkedin fa-2x" aria-hidden="true"></i>
          </a>
        </li>
      
        <li class="sidebar__list-item">
          <a
            href="https://github.com/JohnMThompson"
            target="_blank"
            rel="noopener me"
            aria-label="Github"
            title="Github"
          >
            <i class="fab fa-github fa-2x" aria-hidden="true"></i>
          </a>
        </li>
      
        <li class="sidebar__list-item">
          <a
            href="https://bsky.app/profile/johnthompson.io"
            target="_blank"
            rel="noopener me"
            aria-label="Bluesky"
            title="Bluesky"
          >
            <i class="fab fa-bluesky fa-2x" aria-hidden="true"></i>
          </a>
        </li>
      
        <li class="sidebar__list-item">
          <a
            href="https://www.threads.net/@johnmthom"
            target="_blank"
            rel="noopener me"
            aria-label="Threads"
            title="Threads"
          >
            <i class="fab fa-threads fa-2x" aria-hidden="true"></i>
          </a>
        </li>
      
    </ul>
  </div><footer class="footer footer__sidebar">
  <ul class="footer__list">
    <li class="footer__item">
      &copy;
      
        John Thompson
        2025
      
    </li>
    
  </ul>
</footer>
  
  <script
    type="text/javascript"
    src="/js/medium-zoom.min.9531b4a2217a70c5a1fce89c1f81c9ebbdd586708fcd4130b417320c7230c8d6.js"
    integrity="sha256-lTG0oiF6cMWh/OicH4HJ673VhnCPzUEwtBcyDHIwyNY="
    crossorigin="anonymous"
  ></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PCK6LCZPLD"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag('js', new Date());
  gtag('config', 'G-PCK6LCZPLD');
</script>
</div>
</aside>
      <main
        
          class="wrapper__main"
        
      >
        <header class="header"><div
  class="
    animated fadeInDown
  "
>
  <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false">
    <span aria-hidden="true" class="navbar-burger__line"></span>
    <span aria-hidden="true" class="navbar-burger__line"></span>
    <span aria-hidden="true" class="navbar-burger__line"></span>
  </a>
  <nav class="nav">
    <ul class="nav__list" id="navMenu">
      
      
        
        
          <li class="nav__list-item">
            
            <a
              
              href="/"
              
              title=""
              >Home</a
            >
          </li>
        

      
        
        
          <li class="nav__list-item">
            
            <a
              
              href="/resume/"
              
              title=""
              >Resume</a
            >
          </li>
        

      
        
        
          <li class="nav__list-item">
            
            <a
              
              href="/portfolio/"
              
              title=""
              >Projects</a
            >
          </li>
        

      
        
        
          <li class="nav__list-item">
            
            <a
              
              href="/speaking/"
              
              title=""
              >Speaking</a
            >
          </li>
        

      
        
        
          <li class="nav__list-item">
            
            <a
              
              href="/posts/"
              
              title=""
              >Blog</a
            >
          </li>
        

      
        
        
          <li class="nav__list-item">
            
            <a
              
              href="/collaborate/"
              
              title=""
              >Collaborate</a
            >
          </li>
        

      
    </ul>
    <ul class="nav__list nav__list--end">
      
      
        <li class="nav__list-item">
          <div class="themeswitch">
            <a title="Switch Theme">
              <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a>
          </div>
        </li>
      
    </ul>
  </nav>
</div>
</header>
  <div
    class="post 
      animated fadeInDown
    "
  >
    
    <div class="post__content">
      <h1>What I Learned Migrating Metabase to Postgres</h1>
      <p>Since 2022, I&rsquo;ve maintained a deployment of Metabase for hobby projects. It&rsquo;s been a key part of learning new skills and showcasing projects.</p>
<p>Over the last 3 years, my Metabase deployment has stayed simple - utilizing the default H2 database that ships with the product. Even though the documentation recommends moving off H2 for stability, I stuck with it while I learned the tool. If felt like the right time to move to the recommended database before my portfolio was at risk.</p>
<p>I knew I would need to learn new skills like working with firewalls, ports, and postgres.</p>
<h2 id="juggling-servers-with-ssh">Juggling Servers with SSH</h2>
<p>My previous experience with SSH has been simple, connect to a single server and update software packages and files. This time, I was trying to integrate my Metabase server and the new Postgres server so I had multiple ssh windows open. Juggling these windows, keeping in mind where I was working, and finding the right way to organize the windows on my display took some trial and error. It feels good to no longer need to constantly reference common linux terminal commands and I&rsquo;m starting to get more confident with some more advanced ones.</p>
<p><img src="/images/posts/metabase-migration/multi-terminals.png" alt="Terminal windows"></p>
<h2 id="losing-my-access-and-fixing-it">Losing My Access (and Fixing It)</h2>
<p>A new challenge for me was handling the integration, communication, and security between servers. Since my Metabase server needed to communicate with Postgres, I needed to configure the firewall and open the right ports.</p>
<p>At one point, I was feeling awesome and saved my <code>ufw</code> configuration and completely lost my SSH connection. Luckily, Digital Ocean has a recovery console and I was able to disable the firewall and edit the config to open port 22 - restoring my ssh access. These unexpected bumps in the road are great learning moments and it was exciting to find a solution.</p>
<h2 id="browser-troubles">Browser Troubles</h2>
<p>Eventually, I finished all the steps to migrate my Metabase app database to Postgres. Success! However when I navigated to my Metabase app, I saw errors where the sidebar navigation panel should be. After hours of migration work, I didn&rsquo;t have another round of troubleshooting in me. I assumed I had missed a step and something didn&rsquo;t get transferred to my new database.</p>
<p><img src="/images/posts/metabase-migration/redirect-errors.png" alt="Error messages and redirects"></p>
<p>The next day, I opened Metabase on another PC and everything looked great! A bit surprised, but happy, I figured some setting hadn&rsquo;t propagated through to the front-end the previous night. I tried again on my primary PC and still had the missing navigation menus. Originally, I assumed something went wrong with the migration, however the evidence now suggested the issue was isolated to Chrome on my primary PC. I discovered that Chrome had cached an HSTS policy I couldn&rsquo;t delete. This was causing a series of redirects in that menu. Ultimately, the issue was solved with a new Profile on Chrome, and a reminder that sometimes the issue isn&rsquo;t the migration, it&rsquo;s the browser.</p>
<h2 id="learning-with-chatgpt">Learning with ChatGPT</h2>
<p>This was the first project I used ChatGPT extensively to ask questions and learn from. I found the step-by-step instructions for isolating and solving a problem very helpful. The guidance on common steps like setting up postgres, firewalls, and the proxy was quite good. I found it less helpful when we got into areas that were more unique to my deployment of Metabase. ChatGPT kept trying to give me direction for a Metabase deployment using Docker so I gave gentle reminders and pushed it back on course. I was also able to feed ChatGPT error messages and even screenshots of problems and it would diagnose the issues and give some guidance.</p>
<p><img src="/images/posts/metabase-migration/chatgpt-help.png" alt="Troubleshooting with ChatGPT"></p>
<p>As a beginner to some of this deployment work, I wanted more education along the way, so I was consistently asking ChatGPT to provide more detail around why I was entering a command and what certain options did. I don&rsquo;t want to blindly enter commands into the terminal just to get the job done.</p>
<p>Overall, ChatGPT was a great resource for this project that provided custom documentation tailored to my need while also giving me the ability to drive &ldquo;stick shift&rdquo; and run the commands myself.</p>
</div>
    <div class="post__footer">
      

      
        <span><a class="tag" href="/tags/metabase/">Metabase</a><a class="tag" href="/tags/postgresql/">PostgreSQL</a><a class="tag" href="/tags/linux/">linux</a></span>


      
    </div>

    
  </div>

      </main>
    </div><footer class="footer footer__base">
  <ul class="footer__list">
    <li class="footer__item">
      &copy;
      
        John Thompson
        2025
      
    </li>
    
  </ul>
</footer>
  
  <script
    type="text/javascript"
    src="/js/medium-zoom.min.9531b4a2217a70c5a1fce89c1f81c9ebbdd586708fcd4130b417320c7230c8d6.js"
    integrity="sha256-lTG0oiF6cMWh/OicH4HJ673VhnCPzUEwtBcyDHIwyNY="
    crossorigin="anonymous"
  ></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-PCK6LCZPLD"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag('js', new Date());
  gtag('config', 'G-PCK6LCZPLD');
</script>
</body>
</html>
